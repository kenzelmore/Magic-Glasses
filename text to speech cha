from gtts import gTTS
import os

# Rest of the code remains the same

def loop():
    try:
        while True:
            waitForMotion()
            dis = distance()
            print(f'Distance: {dis:.2f} inches')
            if dis <= 30:
                GPIO.output(BUZZER, GPIO.LOW)
                # Convert text to speech
                speech = "Intruder detected"
                speech = gTTS(text=speech, lang='en', slow=False)
                speech.save("intruder.mp3")
                os.system("mpg321 intruder.mp3")  # Play the generated speech
            else:
                GPIO.output(BUZZER, GPIO.HIGH)
            waitForNoMotion()
    except KeyboardInterrupt:
        destroy()
